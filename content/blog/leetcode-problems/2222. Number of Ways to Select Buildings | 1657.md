---
title: "2222. Number of Ways to Select Buildings | 1657"
date: 2025-11-14
tags: ["string", "prefix-sum", "python"]
---

wrong interpretation & wrong result:

```python
class Solution:
    def numberOfWays(self, s: str) -> int:
        # either 0101... or 1010...
        # if 0, find how many 1s until another 0
        # if 1, find how many 0s until another 1
        # [count(continuous 0 or 1s), count(continuous 0 or 1s), ...]
        # "001101" -> [2,2,1,1]
        # 2*2*1 + 2*1*1 = 6
        # can go with a length == 3 running product, result += each time

        if not s:
            return 0

        consecutive = []
        prev = s[0]
        combo = 0

        for c in s:
            if c == prev:
                combo += 1
            else:
                consecutive.append(combo)
                prev = c
                combo = 1

        consecutive.append(combo)

        # print(consecutive)

        if len(consecutive) < 3:
            return 0

        n = len(consecutive)
        running_product = consecutive[0] * consecutive[1] * consecutive[2]
        result = running_product
        # print(result, running_product)

        for i in range(3, n):
            running_product *= consecutive[i]
            running_product = running_product // consecutive[i - 3]
            result += running_product
            # print(result, running_product)

        return result
```

thinking in another perspective - prefix sum - works:

```python
class Solution:
    def numberOfWays(self, s: str) -> int:
        # we focus on the second building.
        # for each char
        # if 0, then the possibilities of involving this 0 as the second building is
        # (number of 1s before this 0) * 1 * (number of 1s after this 0)

        n = len(s)
        num_zeros = s.count("0")
        num_ones = n - num_zeros
        zeros_to_the_left = ones_to_the_left = result = 0

        for c in s:
            if c == "0":
                result += ones_to_the_left * (num_ones - ones_to_the_left)
                zeros_to_the_left += 1
            else:  # c == "1"
                result += zeros_to_the_left * (num_zeros - zeros_to_the_left)
                ones_to_the_left += 1

        return result
```

takeaways:
1. brought prefix sum out of my toolbox so that I know I have this tool