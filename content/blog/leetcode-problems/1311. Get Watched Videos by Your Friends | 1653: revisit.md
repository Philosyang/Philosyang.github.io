---
title: "1311. Get Watched Videos by Your Friends | 1653: revisit"
date: 2026-01-29
tags: ["array", "hashing", "breadth-first-search", "graph", "sorting", "python"]
---

solved nonetheless.

```python
class Solution:
    def watchedVideosByFriends(self, watchedVideos: List[List[str]], friends: List[List[int]], id: int, level: int) -> List[str]:
        # idea: level-based bfs with visited set
        visited = set()
        dq = deque([id])
        result = defaultdict(int)

        for _ in range(level):
            for _ in range(len(dq)):
                this_person = dq.popleft()
                visited.add(this_person)
                for friend in friends[this_person]:
                    if friend not in visited:
                        visited.add(friend)
                        dq.append(friend)
        
        for _ in range(len(dq)):
            this_person = dq.popleft()
            for v in watchedVideos[this_person]:
                result[v] += 1
        
        tbs = []
        for k,v in result.items():
            tbs.append((v, k))
        tbs.sort()

        return [video for freq, video in tbs]
```

the visited handling is a bit messy.

```python
class Solution:
    def watchedVideosByFriends(self, watchedVideos: List[List[str]], friends: List[List[int]], id: int, level: int) -> List[str]:
        # idea: level-based bfs with visited set
        visited = {id}
        dq = deque([id])
        result = defaultdict(int)

        for _ in range(level):
            for _ in range(len(dq)):
                this_person = dq.popleft()
                for friend in friends[this_person]:
                    if friend not in visited:
                        visited.add(friend)
                        dq.append(friend)

        
        for this_person in dq:
            for v in watchedVideos[this_person]:
                result[v] += 1

        return [video for video, freq in sorted(result.items(), key=lambda kv: (kv[1], kv[0]))]
```