---
title: "1004. Max Consecutive Ones III | 1656"
date: 2025-11-12
tags: ["array", "sliding-window", "python"]
---

I can't believe I wasted 6 hours on a scam on Monday.

wow my runtime beat 93.72% today.

```python
class Solution:
    def longestOnes(self, nums: List[int], k: int) -> int:
        # sliding window
        # first extend with k zeros to ones
        # extend one more and we now shrink until the oldest flip
        # can keep track of the oldest flip with a heap
        # actually a deque works better time complexity-wise

        flips = deque([])

        n = len(nums)
        l = 0
        r = 0
        max_len = k

        while r < n and len(flips) < k:
            if nums[r] == 0:
                flips.append(r)
            r += 1

        if r == n:
            return n

        while r < n and nums[r] == 1:
            r += 1

        if r == n:
            return n

        r -= 1
        # [l, 1, 1, ..., 1, r]
        # flip_cnt == k
        cur_len = r - l + 1
        if cur_len > max_len:
            max_len = cur_len

        while r < n - 1:
            r += 1
            if nums[r] == 0:
                flips.append(r)
                l = flips.popleft() + 1
            cur_len = r - l + 1
            if cur_len > max_len:
                max_len = cur_len

        return max_len
```

takeaways:
1. sliding window revision