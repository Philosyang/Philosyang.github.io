---
title: "1162. As Far from Land as Possible | 1666"
date: 2025-11-26
tags: ["array", "breadth-first-search", "matrix", "python"]
---

It's multi-source BFS with great takeaways!

```python
class Solution:
    def maxDistance(self, grid: List[List[int]]) -> int:
        # bfs from every water source is bad
        # took the hint
        # try bfs from every land

        # KEY TAKEAWAYS for multi-source BFS:
        # In BFS you loop only if you keep re-visiting nodes.
        # So the rule of thumb is:
        # ✅ Mark a node as visited at the moment you enqueue it — not when you dequeue it.

        q = deque()
        n = len(grid)
        result = 0
        visited = set()

        for i in range(n):
            for j in range(n):
                if grid[i][j] == 1:
                    q.append((i, j, 0))  # loc_x, loc_y, manhattan distance to water

        while q:
            i, j, dist = q.popleft()

            if dist > result:
                result = dist

            # right
            right = (i, j + 1)
            if j + 1 < n and right not in visited and grid[i][j + 1] == 0:
                visited.add(right)
                q.append((i, j + 1, dist + 1))
            # down
            down = (i + 1, j)
            if i + 1 < n and down not in visited and grid[i + 1][j] == 0:
                visited.add(down)
                q.append((i + 1, j, dist + 1))
            # left
            left = (i, j - 1)
            if j - 1 > -1 and left not in visited and grid[i][j - 1] == 0:
                visited.add(left)
                q.append((i, j - 1, dist + 1))
            # up
            up = (i - 1, j)
            if i - 1 > -1 and up not in visited and grid[i - 1][j] == 0:
                visited.add(up)
                q.append((i - 1, j, dist + 1))

        return result if result > 0 else -1
```
