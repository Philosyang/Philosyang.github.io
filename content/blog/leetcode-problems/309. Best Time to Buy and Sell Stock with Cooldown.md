---
title: "309. Best Time to Buy and Sell Stock with Cooldown"
date: 2026-02-02
tags: ["neetcode150", "dynamic-programming", "python", "revisit"]
---

Initially thought it was a greedy / brute-force until it became a DP after I wrote everything.  
This question is so good!

```python
class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        # idea:
        # brute force: try all legal combinations till the end
        # + recursion: recursively add up profit
        # + caching: reuse precomputed states
        # = DP
        
        n = len(prices)

        @lru_cache(None)
        def act(prices_idx: int, bought: bool) -> int:
            if prices_idx >= n:
                return 0

            # buy, sell, do nothing
            outcomes = []
            if not bought:  # buy
                outcomes.append(act(prices_idx + 1, True) - prices[prices_idx])
            else:  # sell
                outcomes.append(act(prices_idx + 2, False) + prices[prices_idx])
            outcomes.append(act(prices_idx + 1, bought))  # do nothing

            return max(outcomes)

        return act(0, False)
```
