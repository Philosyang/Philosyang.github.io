---
title: "1368. Minimum Cost to Make at Least One Valid Path in a Grid | 2069"
date: 2025-11-29
tags: ["graph", "python"]
---

I think I can stop trying Dijkstra problems for now.

```python
class Solution:
    def minCost(self, grid: List[List[int]]) -> int:
        # adj
        # dist
        # pq
        # visited
        # dijkstra-able
        m, n = len(grid), len(grid[0])

        adj = defaultdict(list)  # (0, (1, 2))  cost, adj_cell
        dist = {}

        for i in range(m):
            for j in range(n):
                # write adj
                # right
                if j + 1 < n:
                    if grid[i][j] == 1:
                        adj[(i, j)].append((0, (i, j + 1)))
                    else:
                        adj[(i, j)].append((1, (i, j + 1)))
                # down
                if i + 1 < m:
                    if grid[i][j] == 3:
                        adj[(i, j)].append((0, (i + 1, j)))
                    else:
                        adj[(i, j)].append((1, (i + 1, j)))
                # left
                if j - 1 > -1:
                    if grid[i][j] == 2:
                        adj[(i, j)].append((0, (i, j - 1)))
                    else:
                        adj[(i, j)].append((1, (i, j - 1)))
                # up
                if i - 1 > -1:
                    if grid[i][j] == 4:
                        adj[(i, j)].append((0, (i - 1, j)))
                    else:
                        adj[(i, j)].append((1, (i - 1, j)))

                # write dist
                dist[(i, j)] = float("inf")

        dist[(0, 0)] = 0

        pq = [(0, (0, 0))]

        while pq:
            cost, pos = heapq.heappop(pq)

            if cost > dist[pos]:
                continue

            if pos == (m - 1, n - 1):
                return cost

            for adj_cost, adj_pos in adj[pos]:
                new_cost = cost + adj_cost
                if new_cost < dist[adj_pos]:
                    dist[adj_pos] = new_cost
                    heapq.heappush(pq, (new_cost, adj_pos))

        return -1  # impossible to reach
```