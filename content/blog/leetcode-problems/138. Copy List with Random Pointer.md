---
title: "138. Copy List with Random Pointer"
date: 2026-02-10
tags: ["neetcode150", "hashing", "linked-list", "python"]
---

```python
"""
# Definition for a Node.
class Node:
    def __init__(self, x: int, next: 'Node' = None, random: 'Node' = None):
        self.val = int(x)
        self.next = next
        self.random = random
"""


class Solution:
    def copyRandomList(self, head: "Optional[Node]") -> "Optional[Node]":
        # idea:
        # create a hashmap containing unborn Nodes
        # note: val not guaranteed to be unique, thus hash with Node itself

        if not head:
            return None

        bank = {}
        node = head

        while node:
            if node in bank:
                node_copy = bank[node]
            else:
                node_copy = Node(node.val)
                bank[node] = node_copy

            if node.next:
                if node.next not in bank:
                    bank[node.next] = Node(node.next.val)
                node_copy.next = bank[node.next]

            if node.random:
                if node.random not in bank:
                    bank[node.random] = Node(node.random.val)
                node_copy.random = bank[node.random]

            node = node.next

        return bank[head]
```
